[Real MySQL 8.0](http://www.yes24.com/Product/Goods/103415627)ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±í•œ ìë£Œì…ë‹ˆë‹¤.

<br>

# ëª©ì°¨

<br>

- [ëª©ì°¨](#ëª©ì°¨)
- [MySQL ì„¤ì¹˜ì™€ ì„¤ì •](#mysql-ì„¤ì¹˜ì™€-ì„¤ì •)
- [1 MySQL ì„¤ì¹˜](#1-mysql-ì„¤ì¹˜)
  - [1-1 MySQL ì„¤ì¹˜](#1-1-mysql-ì„¤ì¹˜)
  - [1-2 MySQL ì‹¤í–‰ì™€ ì¢…ë£Œ](#1-2-mysql-ì‹¤í–‰ì™€-ì¢…ë£Œ)
  - [1-3 MySQL ì ‘ì†](#1-3-mysql-ì ‘ì†)
- [2 MySQL ì„œë²„ ì„¤ì •](#2-mysql-ì„œë²„-ì„¤ì •)
  - [2-1 ì„¤ì • íŒŒì¼ ìœ„ì¹˜](#2-1-ì„¤ì •-íŒŒì¼-ìœ„ì¹˜)
  - [2-2 ì„¤ì • íŒŒì¼ì˜ êµ¬ì„±](#2-2-ì„¤ì •-íŒŒì¼ì˜-êµ¬ì„±)
  - [2-3 ì‹œìŠ¤í…œ ë³€ìˆ˜](#2-3-ì‹œìŠ¤í…œ-ë³€ìˆ˜)
  - [2-4 ê¸€ë¡œë²Œ ë³€ìˆ˜ì™€ ì„¸ì…˜ ë³€ìˆ˜](#2-4-ê¸€ë¡œë²Œ-ë³€ìˆ˜ì™€-ì„¸ì…˜-ë³€ìˆ˜)
  - [2-5 ì •ì  ë³€ìˆ˜ì™€ ë™ì  ë³€ìˆ˜](#2-5-ì •ì -ë³€ìˆ˜ì™€-ë™ì -ë³€ìˆ˜)

<br>

# MySQL ì„¤ì¹˜ì™€ ì„¤ì •
MySQLì„ ì œëŒ€ë¡œ ë‹¤ë£¨ê¸° ìœ„í•´ì„  MySQLì„ ì„¤ì¹˜í•˜ê³  ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì´í•´í•´ì•¼í•œë‹¤.

ì´ë²ˆ ê¸€ì€ MySQLì„ ìš´ì˜í•˜ëŠ”ë° í•„ìš”í•œ ì„¤ì¹˜ì™€ ì„¤ì •ì— ëŒ€í•´ì„œ ë‹¤ë£¬ë‹¤.

<br>

# 1 MySQL ì„¤ì¹˜
> MySQL ë²„ì „ ë³„ ì—­ì‚¬ëŠ” [ì—¬ê¸°]()ì°¸ê³ .

MySQLì€ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì²˜ëŸ¼ ì•„ë˜ì™€ ê°™ì€ ì„¤ì¹˜ ë°©ë²•ì„ ì§€ì›í•œë‹¤.

* binary ë°©ì‹ ì„¤ì¹˜
* Source ì»´íŒŒì¼ ë°©ì‹ ì„¤ì¹˜
* íŒ¨í‚¤ì§€ ë°©ì‹ ì²˜ë¦¬

ë³¸ ê¸€ì—ì„  Yum (rpm ê¸°ë°˜ì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €)ë¥¼ ì´ìš©í•œ ì„¤ì¹˜ ë°©ì‹ì„ ë‹¤ë£¬ë‹¤.

<br>

## 1-1 MySQL ì„¤ì¹˜
```shell
# Yum ë¦¬í¬ì§€í† ë¦¬ ë‹¤ìš´
$ wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm

# Yum ë¦¬í¬ì§€í† ë¦¬ ì„¤ì¹˜
$ sudo rpm -Uvh mysql80-community-release-el7-3.noarch.rpm

# Yum ë¦¬í¬ì§€í† ë¦¬ í™•ì¸
$ yum repolist enabled | grep "mysql."

# ì„¤ì¹˜ê°€ëŠ¥í•œ MySQL ë²„ì „ë³„ ì¡°íšŒ
$ sudo yum search mysql-community
$ sudo yum --showduplicates list mysql-community-server

# MySQL ì„¤ì¹˜
$ yum install mysql-community-server-8.0.21

# MySQL ì„¤ì¹˜ëœ ë²„ì „ í™•ì¸ 
$ mysqld -V
```
ë§ˆì§€ë§‰ ëª…ë ¹ì„í†µí•´ ì„¤ì¹˜ëœ ë²„ì „ì´ í™•ì¸ë˜ì—ˆë‹¤ë©´, ì´ìƒì—†ì´ MySQLê°€ ì„¤ì¹˜ë˜ì—ˆì„ ê²ƒì´ë‹¤.

> ë³¸ ê¸€ì€ Amazon Linux 2ë¥¼ ì´ìš©í•˜ì—¬ ì‹¤ìŠµì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

<br>

## 1-2 MySQL ì‹¤í–‰ì™€ ì¢…ë£Œ
ì´ì œ MySQL ì„œë²„ì˜ ì„¤ì¹˜ë¥¼ ì™„ë£Œí–ˆìœ¼ë‹ˆ, MySQLì„ ì‹¤í–‰í•˜ê³  ì¢…ë£Œí•˜ëŠ” ë²•ì—ëŒ€í•´ì„œ ì •ë¦¬í•´ë³¸ë‹¤.

<br>

ğŸ’â€â™‚ï¸ **ê¸°ë³¸ ì„¤ì • íŒŒì¼**

MySQL ì„œë²„ê°€ ì„¤ì¹˜ë˜ë©´ `/etc/my.cnf` ì„¤ì • íŒŒì¼ì´ ì¤€ë¹„ë˜ë©°, ì´ íŒŒì¼ì—” MySQL ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ”ë° ê¼­ í•„ìš”í•œ 3~4ê°œì˜ ê¸°ë³¸ì ì¸ ì„¤ì •ì´ ë˜ì–´ìˆë‹¤.

<details>
  <summary>my.cnf íŒŒì¼ ë‚´ìš©</summary>
  
  ---
  
  ```shell
  # For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html

[mysqld]
#
# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M
#
# Remove the leading "# " to disable binary logging
# Binary logging captures changes between backups and is enabled by
# default. It's default setting is log_bin=binlog
# disable_log_bin
#
# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M
#
# Remove leading # to revert to previous value for default_authentication_plugin,
# this will increase compatibility with older clients. For background, see:
# https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_default_authentication_plugin
# default-authentication-plugin=mysql_native_password

datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock

log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
  ```
  
  ---
</details>

> ì´ëŠ” ì‹¤ì œ DBë¥¼ ìš´ìš©í•˜ëŠ”ë°ëŠ” ì„¤ì •ì´ êµ‰ì¥íˆ ë¶€ì¡±í•˜ë¯€ë¡œ, ì‹¤ì œ ìš´ìš©ì‹œ ìˆ˜ì •í•´ì„œ ì‚¬ìš©í•˜ê¸°ë¥¼ ê¶Œê³ í•œë‹¤. ì•„ë˜ì—ì„œ ì„¤ì •ê³¼ ê´€ë ¨í•´ì„œ ë” ìì„¸íˆ ë‹¤ë£¬ë‹¤.
> 
> ì—¬ê¸°ì„  ì¼ë‹¨ ì„¤ì •ì„ ë¬´ì‹œí•˜ê³  MySQLì„ ì‹¤í–‰í•´ë³¸ë‹¤.

<br>

ğŸ’â€â™‚ï¸ **ë°ì´í„° íŒŒì¼ ì¤€ë¹„** (root ê³„ì • ì´ˆê¸° ì„¤ì •)

MySQL ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ì´ˆê¸° ë°ì´í„° íŒŒì¼(ì‹œìŠ¤í…œ í…Œì´ë¸”ì´ ì €ì¥ë˜ëŠ” ë°ì´í„° íŒŒì¼)ê³¼ íŠ¸ëœì­ì…˜ ë¡œê·¸ (ë¦¬ë‘ ë¡œê·¸)íŒŒì¼ì„ ìƒì„±í•œë‹¤.

```shell
$ mysqld --defaults-file=/etc/my.cnf --initialize-insecure
```
* ì´ˆê¸° root ê³„ì • ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
  * `--initialize-insecure`: ì´ˆê¸° ë°ì´í„° íŒŒì¼ê³¼ ë¡œê·¸ íŒŒì¼ì„ ìƒì„±í•˜ê³ , ë¹„ë°€ë²ˆí˜¸ê°€ ì—†ëŠ” ê´€ë¦¬ì ê³„ì •ì¸ root ìœ ì €ë¥¼ ìƒì„±í•˜ëŠ” ì„¤ì •.
  * `--initialize`: ê´€ë¦¬ì ê³„ì •ì„ ìƒì„±í•˜ê³  ë¹„ë°€ë²ˆí˜¸ë„ ìƒì„±í•˜ëŠ” ì„¤ì •. ìƒì„±ëœ ê´€ë¦¬ì ê³„ì •ì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” ì—ëŸ¬ ë¡œê·¸ íŒŒì¼ë¡œ ê¸°ë¡í•œë‹¤.
    * ì—ëŸ¬ ë¡œê·¸ ê²½ë¡œëŠ” `/var/log/mysqld.log`ì— ì €ì¥ëœë‹¤.

<br>

ğŸ’â€â™‚ï¸ **MySQL ì„œë²„ ì‹¤í–‰ê³¼ ì¢…ë£Œ**

ìœ ë‹‰ìŠ¤ ê³„ì—´ OSì—ì„œ RPM íŒ¨í‚¤ì§€ë¡œ MySQLì„ ì„¤ì¹˜í–ˆë‹¤ë©´ ìë™ìœ¼ë¡œ `/usr/lib/systemd/system/mysqld.service`ì— ì„œë¹„ìŠ¤ íŒŒì¼ì´ ìƒì„±ëœë‹¤.

ì´ë¥¼ ì´ìš©í•´ ì‰½ê²Œ MySQL ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  ì¢…ë£Œí•  ìˆ˜ ìˆë‹¤.

```shell
# MySQL ì‹¤í–‰ (ì„œë¹„ìŠ¤ ì‹œì‘)
$ systemctl enable mysqld # ì¬ë¶€íŒ… ì‹œ ìë™ ì‹œì‘í•˜ë„ë¡ ì„¤ì •
$ systemctl start mysqld # ì„œë¹„ìŠ¤ ì‹œì‘
$ systemctl status mysqld # ì„œë¹„ìŠ¤ êµ¬ë™ ì—¬ë¶€ í™•ì¸

# ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ í™•ì¸
$ ps -ef | grep mysqld

# MySQL ì¢…ë£Œ
$ systemctl stop mysqld

# MySQL ì›ê²© ì¢…ë£Œ
mysql> SHUTDOWN;
```

<br>

ğŸ’â€â™‚ï¸ **MySQL í´ë¦° ì¢…ë£Œ**

MySQL ì„œë²„ì—ì„  ì‹¤ì œ íŠ¸ëœì­ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ì»¤ë°‹ë¼ë„ ë°ì´í„° íŒŒì¼ì— ë³€ê²½ëœ ë‚´ìš©ì´ ê¸°ë¡ë˜ì§€ì•Šê³  ë¡œê·¸ íŒŒì¼ (ë¦¬ë‘ ë¡œê·¸)ì—ë§Œ ê¸°ë¡ë¼ ìˆì„ ìˆ˜ ìˆë‹¤. 

> ì •í™•íˆëŠ” innodbì˜ ë²„í¼ í’€ì— ë°±ì—…í•˜ê³  ë³µêµ¬í•˜ëŠ” ê²ƒ.

ë§Œì•½ MySQL ì„œë²„ê°€ ì¢…ë£Œë  ë•Œ ëª¨ë“  ì»¤ë°‹ëœ ë‚´ìš©ì„ ë°ì´í„° íŒŒì¼ì— ê¸°ë¡í•˜ê³  ì¢…ë£Œí•˜ê³ ì‹¶ë‹¤ë©´ ì•„ë˜ ì˜µì…˜ì„ ì£¼ë©´ëœë‹¤.

```shell
# ë¦¬ëˆ…ìŠ¤ì—ì„œ ì¢…ë£Œ
mysql> SET GLOBAL innodb_fast_shutdown=0;
$ systemctl stop mysqld.service

# ì›ê²©ì—ì„œ ì¢…ë£Œ
mysql> SET GLOBAL innodb_fast_shutdown=0;
mysql> SHUTDOWN;
```

<br>

## 1-3 MySQL ì ‘ì†
ì´ì œ MySQLì— ì ‘ì†í•˜ë©´ ëœë‹¤.

<br>

ğŸ’â€â™‚ï¸ **ë‹¤ì–‘í•œ ì ‘ì† ë°©ë²•**

* `mysql -u root -p --host=localhost --socket=/tmp/mysql.sock`
  * ì†Œì¼“ íŒŒì¼ì„ ì´ìš©í•´ ì ‘ì†í•˜ëŠ” ì˜ˆì‹œ.
* `mysql -u root -p --host=127.0.0.1 --port=3306`
  * TCP/IPë¥¼ í†µí•´ ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì— ì ‘ì†í•˜ëŠ” ì˜ˆì‹œ.
* `mysql -u root -p`
  * ê¸°ë³¸ê°’ìœ¼ë¡œ í˜¸ìŠ¤íŠ¸ëŠ” `localhost`ê°€ë˜ë©° ì†Œì¼“ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ì†í•œë‹¤.

> ì´ë•Œ `localhost`ì™€ `127.0.0.1`ì€ ì„œë¡œ ë‹¤ë¥´ê²Œ ì¸ì‹í•œë‹¤.
> * `localhost`ëŠ” ìœ ë‹‰ìŠ¤ì˜ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹  (IPC)ë¥¼ í†µí•´ í†µì‹ í•œë‹¤.
> * `127.0.0.1`ì€ TCP/IP í†µì‹ ë°©ì‹ìœ¼ë¡œ ë£¨í”„ë°± IPë¥¼ í†µí•´ í†µì‹ í•œë‹¤. (ì™¸ë¶€ì—ì„œë„ ì—°ê²°í•  ë•Œì™€ ë™ì¼í•œ ë°©ì‹)

<br>

ğŸ’â€â™‚ï¸ **ì ‘ì†**

```shell
# MySQL ë¡œê·¸ í™•ì¸
cat /var/log/mysqld.log
```

<p align="center"><img src="./image/initialize-root-password.png"><br>ìƒì„±ëœ root ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ </p>

ìœ„ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ‘ì†í•˜ë©´ ëœë‹¤.

```shell
# MySQL ì ‘ì†
$ mysql -u root -p --host=127.0.0.1 --port=3306
```

> root ê³„ì • ë¹„ë°€ë²ˆí˜¸ ì„¤ì •í•˜ì§€ì•Šì•˜ë‹¤ë©´ ë¹„ë°€ë²ˆí˜¸ì—†ì´ ë°”ë¡œ ì ‘ì†ì´ ë  ê²ƒì´ë‹¤.

<br>

ğŸ’â€â™‚ï¸ **root ê³„ì • ë¹„ë°€ë²ˆí˜¸ ë³€ê²½**

MySQL 5.7ì˜ ê²½ìš°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```shell
mysql> USE mysql;

# ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •
mysql> UPDATE user SET authentication_string=password('1234') where user='root';

# ë³€ê²½ì‚¬í•­ ì €ì¥
mysql> FLUSH PRIVILEGES;
```

<br>

MySQL 8.0ì˜ ê²½ìš°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```shell
# ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •
mysql> ALTER user 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'ë³€ê²½ ë¹„ë°€ë²ˆí˜¸';

# ë³€ê²½ì‚¬í•­ ì €ì¥
mysql> FLUSH PRIVILEGES;
```

<br>

# 2 MySQL ì„œë²„ ì„¤ì •

<br>

## 2-1 ì„¤ì • íŒŒì¼ ìœ„ì¹˜
MySQL ì„œë²„ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ëœë‹¤.

ë¦¬ëˆ…ìŠ¤ì˜ê²½ìš° `my.cnf`ë¼ëŠ” ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , ìœˆë„ìš° ê³„ì—´ì—ì„œëŠ” `my.ini`ë¼ëŠ” ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤.

<br>

ğŸ¤” **MySQL ì„œë²„ëŠ” ì–´ë–¤ ì„¤ì •íŒŒì¼ì„ ì‚¬ìš©í•´ì„œ ì‹¤í–‰ë ê¹Œ?**

```shell
$ mysql --help | more
```
ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì¡°ê¸ˆë§Œ ë‚´ë¦¬ë©´ MySQLì´ ì–´ë–¤ ìˆœì„œë¡œ ì„¤ì •íŒŒì¼ì„ ì°¾ì•„ ì‹¤í–‰í•˜ëŠ”ì§€ ë‚˜ì˜¨ë‹¤.

<p align="center"><img src="./image/mysql_my_cnf_location.png"> </p>

ì‹¤í–‰ ê²°ê³¼ë¡œ ì•Œ ìˆ˜ ìˆë“¯ì´ ì•„ë˜ ìˆœì„œë¡œ ì„¤ì • íŒŒì¼ì„ ì°¾ëŠ”ë‹¤.

1. `/etc/my.cnf`
2. `/etc/mysql/my.cnf`
3. `/usr/etc/my.cnf`
4. `~/.my.cnf`

<br>

## 2-2 ì„¤ì • íŒŒì¼ì˜ êµ¬ì„±
ì•ì„œ ì•Œì•„ë³´ì•˜ë“¯ì´, MySQLì€ í•˜ë‚˜ì˜ `my.cnf` ì„¤ì •íŒŒì¼ì„ í†µí•´ ì„¤ì •í•œë‹¤.

<br>

ğŸ’â€â™‚ï¸ **í•˜ë‚˜ì˜ ì„¤ì •íŒŒì¼ì— ì—¬ëŸ¬ ê°œì˜ ì„¤ì • ê·¸ë£¹ì„ ë‹´ì„ ìˆ˜ ìˆë‹¤.**

> my.cnf
```shell
[mysqld_safe]
malloc-lib = /opt/lib/libtcmalloc_minimal.so

[mysqld]
socket = /usr/local/mysql/tmp/mysql.sock
port = 3306

[mysql]
default-character-set = utf8mb4
socket = /usr/local/mysql/tmp/mysql.sock
port = 3304

[mysqldump]
default-character-set = utf8mb4
socket = /usr/local/mysql/tmp/mysql.sock
port = 3305
```
`mysql_dump`í”„ë¡œê·¸ë¨ì€ `[mysql_dump]` ì„¤ì • ê·¸ë£¹ì„, `mysqld` í”„ë¡œê·¸ë¨ì€ `[mysqld]` ì„¤ì • ê·¸ë£¹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.

<br>

ğŸ’â€â™‚ï¸ **my.cnf íŒŒì¼**

MySQL 8.0 ì„œë²„ì˜ ì‹œìŠ¤í…œ ë³€ìˆ˜ëŠ” ëŒ€ëµ 570ê°œ ìˆ˜ì¤€ì´ë©° ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‚˜ ì»´í¬ë„ŒíŠ¸ì— ë”°ë¼ ê°œìˆ˜ëŠ” ëŠ˜ì–´ë‚œë‹¤ê³ í•œë‹¤.

ê¸°ë³¸ì ì¸ ì„¤ì •ì€ ì•„ë˜ì™€ ê°™ìœ¼ë‚˜, ìƒí™©ì—ë”°ë¼ í•„ìš”í•œ ì„¤ì •ì„ í•´ì£¼ì–´ì•¼í•œë‹¤.

<details>
  <summary>ê¸°ë³¸ ì„¤ì •</summary>
  
  ---
  
  ```shell
# The MySQL database server configuration file.
#
# You can copy this to one of:
# - "/etc/mysql/my.cnf" to set global options,
# - "~/.my.cnf" to set user-specific options.
#
# One can use all long options that the program supports.
# Run program with --help to get a list of available options and with
# --print-defaults to see which it would actually understand and use.
#
# For explanations see
# http://dev.mysql.com/doc/mysql/en/server-system-variables.html

# This will be passed to all mysql clients
# It has been reported that passwords should be enclosed with ticks/quotes
# escpecially if they contain "#" chars...
# Remember to edit /etc/mysql/debian.cnf when changing the socket location.

# Here is entries for some specific programs
# The following values assume you have at least 32M ram

[mysqld_safe]
socket          = /var/run/mysqld/mysqld.sock
nice            = 0

[mysqld]
#
# * Basic Settings
#
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
#
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
lc-messages-dir = /usr/share/mysql
skip-external-locking
#
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
bind-address            = 127.0.0.1
#
# * Fine Tuning
#
key_buffer_size         = 16M
max_allowed_packet      = 16M
thread_stack            = 192K
thread_cache_size       = 8
# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover-options  = BACKUP
#max_connections        = 100
#table_open_cache       = 64
#thread_concurrency     = 10
#
# * Query Cache Configuration
#
query_cache_limit       = 1M
query_cache_size        = 16M
#
# * Logging and Replication
#
# Both location gets rotated by the cronjob.
# Be aware that this log type is a performance killer.
# As of 5.1 you can enable the log at runtime!
#general_log_file        = /var/log/mysql/mysql.log
#general_log             = 1
#
# Error log - should be very few entries.
#
log_error = /var/log/mysql/error.log
#
# Here you can see queries with especially long duration
#slow_query_log         = 1
#slow_query_log_file    = /var/log/mysql/mysql-slow.log
#long_query_time = 2
#log-queries-not-using-indexes
#
# The following can be used as easy to replay backup logs or for replication.
# note: if you are setting up a replication slave, see README.Debian about
#       other settings you may need to change.
#server-id              = 1
#log_bin                        = /var/log/mysql/mysql-bin.log
expire_logs_days        = 10
max_binlog_size   = 100M
#binlog_do_db           = include_database_name
#binlog_ignore_db       = include_database_name
#
# * InnoDB
#
# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.
# Read the manual for more InnoDB related options. There are many!
#
# * Security Features
#
# Read the manual, too, if you want chroot!
# chroot = /var/lib/mysql/
#
# For generating SSL certificates I recommend the OpenSSL GUI "tinyca".
#
# ssl-ca=/etc/mysql/cacert.pem
# ssl-cert=/etc/mysql/server-cert.pem
# ssl-key=/etc/mysql/server-key.pem
```
  
  ---
</details>

í•„ìš”í•œ ì„¤ì •ì€ í•„ìš”í•  ë•Œ ì•„ë˜ ì‹œìŠ¤í…œ ë³€ìˆ˜ ëª©ë¡ì—ì„œ ì°¾ì•„ì„œ ì„¤ì •í•´ì£¼ë©´ëœë‹¤.

* https://dev.mysql.com/doc/refman/8.0/en/server-system-variable-reference.html

<br>

## 2-3 ì‹œìŠ¤í…œ ë³€ìˆ˜
MySQL ì„œë²„ëŠ” ì‹¤í–‰í•  ë•Œ ì„¤ì • íŒŒì¼ì˜ ë‚´ìš©ì„ ì½ì–´ ì—¬ëŸ¬ê°€ì§€ ì„¤ì •ê°’ë“¤ì„ ë©”ëª¨ë¦¬ì— ë³€ìˆ˜ë¡œ ì €ì¥í•´ë†“ìœ¼ë©°, ì´ë¥¼ `ì‹œìŠ¤í…œ ë³€ìˆ˜`ë¼ê³  ë¶€ë¥¸ë‹¤.

ì‹œìŠ¤í…œ ë³€ìˆ˜ëŠ” MySQL ì„œë²„ì— ì ‘ì†í•˜ì—¬ `SHOW VARIABLES`ë˜ëŠ” `Show GLOBAL VARIABLES` ëª…ë ¹ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì‹œìŠ¤í…œ ë³€ìˆ˜ ê°’ì´ ì‹¤ì œë¡œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ ì•Œê¸° ìœ„í•´ì„œëŠ” ê° ë³€ìˆ˜ê°€ ê¸€ë¡œë²Œ ë³€ìˆ˜ì¸ì§€ ì„¸ì…˜ ë³€ìˆ˜ì¸ì§€ êµ¬ë¶„í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤.

ê·¸ë¦¬ê³  ì‹¤ì œë¡œ [ì‹œìŠ¤í…œ ë³€ìˆ˜ ëª©ë¡](https://dev.mysql.com/doc/refman/8.0/en/server-system-variable-reference.html)ì„ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ 5ê°€ì§€ ì†ì„±ì„ ë‚˜íƒ€ë‚¸ë‹¤.

<p align="center"><img src="./image/system_variables_list.png"><br>ì¶œì²˜: https://dev.mysql.com/doc/refman/8.0/en/server-system-variable-reference.html </p>

* Cmd-line: MySQL ì„œë²„ì˜ ëª…ë ¹í–‰ ì¸ìë¡œ ì„¤ì •ë  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€.
* Option file: MySQLì˜ ì„¤ì • íŒŒì¼ì¸ `my.cnf`ë¡œ ì œì–´í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€.
* System Var: ì‹œìŠ¤í…œ ë³€ìˆ˜ì¸ì§€ ì•„ë‹Œì§€ ë‚˜íƒ€ëƒ„. 
* Var Scope: ì‹œìŠ¤í…œ ë³€ìˆ˜ì˜ ì ìš© ë²”ìœ„ë¥¼ ë‚˜íƒ€ëƒ„.
  * ê¸€ë¡œë²Œ, ì„¸ì…˜, ëª¨ë‘.
* Dynamic: ì‹œìŠ¤í…œ ë³€ìˆ˜ê°€ ë™ì ì¸ì§€ ì •ì ì¸ì§€ êµ¬ë¶„í•˜ëŠ” ë³€ìˆ˜.

<br>

## 2-4 ê¸€ë¡œë²Œ ë³€ìˆ˜ì™€ ì„¸ì…˜ ë³€ìˆ˜
* ê¸€ë¡œë²Œ ë³€ìˆ˜
  * í•˜ë‚˜ì˜ MySQL ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì „ì²´ì ìœ¼ë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì‹œìŠ¤í…œ ë³€ìˆ˜.
  * ë‹¨ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ëŠ” InnoDB ë²„í¼ í’€ í¬ê¸° ë˜ëŠ” MyISAMì˜ í‚¤ ìºì‹œ í¬ê¸°ê°™ì´ MySQL ì„œë²„ ìì²´ì— ê´€ë ¨ëœ ì„¤ì •í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤.
* ì„¸ì…˜ ë³€ìˆ˜
  * MySQL í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ì ‘ì†í•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ ë¶€ì—¬í•˜ëŠ” ì˜µì…˜ì˜ ê¸°ë³¸ ê°’ì„ ì œì–´í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.
  * ì¦‰, í´ë¼ì´ì–¸íŠ¸ì˜ í•„ìš”ì— ë”°ë¼ ê°œë³„ ì»¤ë„¥ì…˜ ë‹¨ìœ„ë¡œ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ì´ë‹¤. (ëŒ€í‘œì ìœ¼ë¡œ `autocommit` ì„¤ì •)
  * í´ë¼ì´ì–¸íŠ¸ë³„ ê¸°ë³¸ê°’ì€ ê¸€ë¡œë²Œ ë³€ìˆ˜ì´ë‹¤.
* Both
  * ì„¸ì…˜ ë²”ìœ„ì˜ ì‹œìŠ¤í…œ ë³€ìˆ˜ ê°€ìš´ë° MySQL ì„œë²„ì˜ ì„¤ì • íŒŒì¼(`my.cnf`)ì— ëª…ì‹œí•´ ì´ˆê¸°í™”í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ëŠ” ëŒ€ë¶€ë¶„ Bothë¡œ ëª…ì‹œë¼ìˆë‹¤.
  * ìˆœìˆ˜í•˜ê²Œ ì„¸ì…˜ ë²”ìœ„ì¸ ë³€ìˆ˜ëŠ” ì„¤ì • íŒŒì¼ì— ì´ˆê¸°ê°’ì„ ëª…ì‹œí•  ìˆ˜ ì—†ë‹¤.
  
<br>

## 2-5 ì •ì  ë³€ìˆ˜ì™€ ë™ì  ë³€ìˆ˜
MySQL ì„œë²„ì˜ ì‹œìŠ¤í…œ ë³€ìˆ˜ëŠ” ì„œë²„ê°€ ê¸°ë™ì¤‘ì¸ ìƒíƒœì—ì„œ ë³€ê²½ ê°€ëŠ¥í•œì§€ ì—¬ë¶€ì— ë”°ë¼ ë™ì  ë³€ìˆ˜ì™€ ì •ì  ë³€ìˆ˜ë¡œ êµ¬ë¶„ëœë‹¤.

ë³€ê²½í•˜ê³ ìí•˜ëŠ” ë³€ìˆ˜ê°€ ë™ì  ë³€ìˆ˜ë¼ë©´ MySQLì„œë²„ë¥¼ ì¬ì‹œë™í•˜ì§€ì•Šê³ ë„ SET ëª…ë ¹ì„ í†µí•´ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

```shell
# ê¸€ë¡œë³„ ì‹œìŠ¤í…œ ë³€ìˆ˜ ì¡°íšŒ
mysql> SHOW GLOBAL VARIABLES LIKE '%max_connections%'

# ê¸€ë¡œë²Œ ì‹œìŠ¤í…œ ë³€ìˆ˜ ìˆ˜ì •
mysql> SET GLOBAL max_connections=500;
```

<br>

â—ï¸ **SETì„ í†µí•œ ìˆ˜ì •ì€ `my.cnf` íŒŒì¼ê¹Œì§€ ì—…ë°ì´íŠ¸ë˜ì§€ì•Šê¸°ì—, ì¶”í›„ì— ë³€ê²½ëœ ê°’ì„ ìœ ì§€í•˜ê³ ì‹¶ë‹¤ë©´ ì„¤ì • íŒŒì¼ë„ ê°™ì´ ë³€ê²½í•´ì£¼ì–´ì•¼í•œë‹¤.**

SETì„ í†µí•œ ìˆ˜ì •ì€ MySQL ì„œë²„ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ì˜ ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•  ë¿ì´ë‹¤. ë§Œì•½ MySQL ì„œë²„ë¥¼ ì¬ì‹¤í–‰í–ˆì„ ë•Œë„ ìˆ˜ì •ëœ ê°’ì„ ìœ ì§€í•˜ê³ ì‹¶ë‹¤ë©´ `my.cnf`ì—ë„ ê°’ì„ ë³€ê²½í•´ì£¼ì–´ì•¼í•œë‹¤.

> `SET PERSIST` ëª…ë ¹ì„í†µí•´ ì„¤ì • íŒŒì¼ì—ë„ ìˆ˜ì •ì‚¬í•­ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ê¸°ì¡´ ì„¤ì •íŒŒì¼ì´ ì•„ë‹Œ ìƒˆë¡œìš´ íŒŒì¼ì— ì¶”ê°€ëœë‹¤. (MySQLì´ ì¬ì‹¤í–‰ë  ë•Œ í•´ë‹¹ íŒŒì¼ë„ ê°™ì´ ì½ëŠ”ë‹¤ê³ í•œë‹¤. í•˜ì§€ë§Œ.. ì„¤ì •íŒŒì¼ì´ ë³µìˆ˜ë©´ ì¶”í›„ ìœ ì§€ë³´ìˆ˜ë©´ì— ì¢‹ì§€ì•Šì„ ë“¯ í•˜ë‹¤.)

<br>



