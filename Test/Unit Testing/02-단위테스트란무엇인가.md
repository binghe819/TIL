# 목차

<br>

<br>

# 1 '단위'의 정의

<br>

## 1-1 단위 테스트의 세 가지 속성

💁‍♂️ 단위 테스트의 세 가지 속성

* **작은 코드 조각(단위라고도 함)을 검증하고,**
  * 다양한 해석이 가능하다. '단위'의 기준은 무엇일까?
* **빠르게 수행하고.**
  * 모두 수긍하는 속성
* **격리된 방식으로 처리하는 자동화된 테스트다.**
  * 고전파와 런던파(Mockist)

<br>

## 1-2 단위의 기준 - 격리

<p align="center"><img src="./image/solitaryOrsociable.png"><br>출처: https://martinfowler.com/bliki/UnitTest.html </p>

<br>

🤔 **런던파**(Mockist)

* **'단위'란 무조건 고립되서 단독적으로 실행되어야한다는 것을 의미**한다.
  * 예를 들어, 주문 함수의 계산 메서드를 테스트한다고 가정해보자.
  * 계산 메서드는 상품이나 고객 클래스의 일부 함수들을 사용하게 된다.
  * 이때 고객이나 상품 클래스가 가지는 문제로 테스트가 실패하기를 원하지 않아 Mock객체를 만들어 테스트하는 것을 런던파라고한다.
* 장점
  * 테스트가 실패하면 코드베이스의 어느 부분이 고장 났는지 확실히 알 수 있다. (필자는 개인적으로 동의하지 않는다)
  * 개체 그래프를 분할할 수 있다.
  * 프로젝트 전반적으로 한 번에 한 클래스만 테스트하라는 지침이 있다면 전체 단위 테스트 코드를 간단한 구조로 할 수 있다.
  * 외부 서비스와 통신할 때의 '비결정적' 위험때문에 Mock을 만들어 테스트하는 것이 맞다.
  * Mock을 만들어 테스트하는 것이 속도도 더 빠르다.
* 단점
  * 성공하는 테스트를 작성할 확률이 높다. (필자의 생각)

<br>

🤔 **고전파**

* **Mock객체를 사용하지 않고 실제 의존하고 있는 클래스를 사용하여 테스트하는 것을 의미**한다.
* 장점
  * 통합 테스트를 할 수 있다. (실제 운영상태와 비슷한 환경에서의 테스트를 진행할 수 있다.)
* 단점
  * 테스트 간에 실행 컨텍스트가 공유된다면 테스트가 꼬인다. (대표적인 예시 -> DB) -> 테스트 간의 간섭

<br>

💁‍♂️ **고전파, 런던파예시**

요구사항은 다음과 같다.

* 온라인 상점을 운영하며, 고객이 제품을 구매할 수 있는 유스케이스.
  * 상점에 재고가 충분하면 구매는 성공으로 간주되고, 구매 수량만큼 상점의 제품 수량이 줄어든다.
  * 제품이 충분하지 않으면 구매는 성공하지 못하고 상점은 아무 일도 일어나지 않는다.

<br>

## 1-3 다양한 의존성
테스트할 때 다양한 의존성이 존재한다.
* 공유 의존성
  * 테스트 간에 공유되고 서로의 결과에 영향을 미칠 수 있는 수단을 제공하는 의존성.
    * ex. 정적 가변 필드 (static final)
    * ex. DB
* 비공개 의존성
  * 공유하지 않는 의존성
* 프로세스 외부 의존성
  * 애플리케이션 실행 프로세스 외부에서 실행되는 의존성이며, 아직 메모리에 없는 데이터에 대한 프록시를 의미한다.
  * 프로세스 외부 의존성은 대부분 공유 의존성에 해당하지만 모두 그런것은 아니다.
    * ex. DB는 프로세스 외부이면서 공유 의존성이다. 단, 매 테스트마다 도커 컨테이너로 새로 띄운다면 공유하지 않는 상태가 된다.


<br>

> 테스트 대역과 목
> * 테스트 대역은 실행과 관련 없이 모든 종류의 가짜 의존성을 설명하는 포괄적인 용어.
> * 목은 그러한 의존성의 한 종류.

<br>

# 2 
