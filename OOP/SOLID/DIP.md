# 목차

- [목차](#목차)
- [DIP - 의존 역전 원칙](#dip---의존-역전-원칙)
  - [개념](#개념)
  - [예제 1](#예제-1)
  - [예제 2](#예제-2)
- [생각해볼 점](#생각해볼-점)
- [참고](#참고)

<br>

#  DIP - 의존 역전 원칙

> * "고차원 모듈은 저차원 모듈에 의존하면 안된다. 이 두 모듈 모두 다른 추상화된 것에 의존해야 한다." - 로버트 C. 마틴
> * **"추상화된 것은 구체적인 것에 의존하면 안된다. 구체적인 것이 추상화된 것에 의존해야 한다." - 로버트 C. 마틴**
> * **자신보다 변하기 쉬운 것에 의존하지 마라.**
>   * 자신보다 변하기 쉬운 것에 의존하던 것을 추상화된 인터페이스나 상위 클래스를 두어 변하기 쉬운것의 변화에 영향받지 않게 하는 것이 의존 역전 원칙(DIP이다)

<br>

## 개념

* ***의존은 추상과 이루어져야 한다는 원칙***
* **상위 모듈은 하위 모듈에 의존해서는 안된다. 상위 모듈과 하위 모듈 모두 추상화에 의존해야 한다.**
* **자주 변화하는 것보다 변화하기 어려운 것, 변화가 거의 없는 것에 의존하라는 것**
  * 상위 클래스일수록, 인터페이스일수록, 추상 클래스일수록 변하지 않을 가능성이 높기에 **하위 클래스나 구체 클래스가 아닌 상위 클래스, 인터페이스, 추상 클래스를 통해 의존하라는 것이 DIP이다.**
* 의존성 주입
  * 이것도 SRP와 비슷하게 **컴파일타임 의존성을 고정시키고 런타임 의존성을 변경하는 것을 지향한다.**
  * 런타임에 외부로부터 의존성을 주입받아 실행하게 된다. 그러므로 컴파일타임엔 추상화가 되어 있다.
* 예시
  * 프레임워크 자체가 DIP를 적극 이용한다고 볼 수 있다.
    * 개발자는 프레임워크의 실행 흐름에 위치한 인터페이스를 구현하거나 확장하여 구현한다.
  * 스프링은 DIP를 적극 이용한다.
  * 스프링에서 `DAO` 인터페이스를 놓고, 빈 팩토리를 이용해 구현된 `JdbcDAO`, `JpaDAO`, `myBatisDAO` 중 하나를 주입해준다. `DAO` 코드는 그저 `DAO` 라는 인터페이스를 의존하고 있을 뿐이다.

<br>

## 예제 1

<p align="center"><img src="./image/21784C415698700A05.png"></p>

* 자동차가 스노우 타이어에 의존하고 있다.
  * 스노우타이어를 일반타이어로 교체할 때 자동차는 그 영향에 노출돼 있다.
  * 자동차 자신보다 더 자주 변하는 스노우타이어에 의존하기에 좋지 않은 설계이다.

<p align="center"><img src="./image/235E853E569870EA35.png"> </p>

* 자동차가 구체적인 타이어들이 아닌 추상화된 타이어 인터페이스에만 의존하게 함으로써 타이어가 변경돼도 자동차는 그 영향을 받지 않는다.
  * OCP와 비슷하다.
* 기존에는 스노우타이어가 의존하지 않는 클래스였는데, 타이어 인터페이스를 만듬으로써, 타이어 인터페이스에 의존하게 됐다.
  * **바로 의존의 방향이 역전된 것이다.**
  * 자신보다 변하기 쉬운 것에 의존하던 것을 추상화된 인터페이스나 상위 클래스를 두어 변하기 쉬운것의 변화에 영향받지 않게 하는 것이 의존 역전 원칙(DIP이다)

<br>

## 예제 2

<img src="./image/image-20200804014623392.png" />

* 만약 갤럭시가 아닌 lg의 G시리즈나 아이폰등도 상속받아서 구현하여 `Person`의 인스턴스 객체의 속성으로 설정함으로서 의존성을 역전 시켜 DIP 원칙을 만족한다.

<br>

# 생각해볼 점
* OCP와 차이점은?
  * 

<br>

# 참고

* [스프링 입문을 위한 자바 객체 지향의 원리와 이해](http://www.yes24.com/Product/Goods/17350624)