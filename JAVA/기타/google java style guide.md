# Google Java Style Guide

> 이 문서는 [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)를 번역한 문서입니다. 오역이 있을 수 있습니다.

프로그래밍 공부를 하며 가장 처음 접한 스타일 가이드는 [SUN의 스타일 가이드](https://github.com/binghe819/TIL/blob/master/JAVA/%EA%B8%B0%ED%83%80/Java%20Convention.md)입니다.

이번에 운이 좋게 우테코 프리코스에 참여하게 되었는데, 요구사항으로 [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)가 있어 이 기회를 삼아 번역해보려고 합니다.

[Google java style guide](https://google.github.io/styleguide/javaguide.html)는 60% 정도는 [SUN의 스타일 가이드](https://github.com/binghe819/TIL/blob/master/JAVA/%EA%B8%B0%ED%83%80/Java%20Convention.md)와 같습니다.

몇 가지 다른 부분들은 tab 대신 space를 사용하는 것과 column limit이 80에서 100으로 더 크게 지정되었다는 부분과 최신 lambda 표기법 등이 추가 되었습니다.





## 목차







## 1 소개

이 문서는 Java 소스 코드에 대한 Google의 코딩 표준에 대한 완벽한 정의 문서입니다. Java 소스 파일은 여기에 있는 규칙을 준수하는 경우에만 Google 스타일로 칭할 수 있습니다.

다른 프로그래밍 스타일 가이드와 같이 다루는 문제들이 심미적(미적인) 포맷팅 주제뿐 아니라 다른 유형의 규칙이나 코딩 표준도 포함합니다. 그러나 이 문서는 주로 우리가 보편적으로 따르는 엄격하고 빠른 규칙에 초점을 맞추고 있으며, 사람이든 도구이든 명확하게 시행 할 수 없는 조언을 제공하지 않습니다.

<br>

### 1-1 용어 노트

이 문서에서는 달리 명시하지 않는 한 다음과 같이 용어를 사용합니다.

1. class라는 용어는 클래스, enum, interface, @interface를 포괄한 용어입니다.
2. 클래스의 member라는 용어는 중첩 클래스, 필드, 메서드 또는 생성자를 포괄한 용어입니다. 즉, 초기화와 주석들을 제외한 클래스의 모든 최상위 내용들을 포괄하여 쓰인다.
3. comment라는 용어는 항상 구현 주석을 가리킨다. 우리는 "documentation comments"라는 용어 대신 "Javadoc"이라는 용어를 사용합니다.

문서 전체에 다른 "용어 참고 사항"이 가끔 나옵니다.

<br>

### 1-2 가이드 노트

이 문서의 예제 코드는 비표준 (non-normative)입니다. 즉, 예제가 Google Style이지만, 스타일리쉬한 코드를 나타내지 않을 수 있습니다. 예제의 추가적인 포매팅 선택들은 규칙으로 적용되지 않아야합니다.

<br>

## 2 소스 파일의 기본

<br>

### 2-1 파일 이름

소스 파일 이름은 해당 파일이 포함하는 최상위 클래스의 대/소문자를 구분할 수 있는 이름들과 `.java` 확장자로 구성됩니다.

<br>

### 2-2 파일 인코딩: UTF-8

소스 파일은 UTF-8로 인코딩 되어 있습니다.

<br>

### 2-3 특수 문자

#### 2-3-1 공백 문자

줄을 끝내는 문자를 제외하고, ASCII horizontal space character (0x20)는 소스 파일에 나타나는 유일한 공백 문자입니다. 

이것은 다음을 의미합니다.

1. 문자열과 문자 리터럴의 다른 공백 문자는 모두 이스케이프됩니다.
2. 탭 문자는 들여 쓰기에 사용되지 않습니다.

#### 2-3-2 특수 이스케이프 문자

특수 이스케이프 문자들 (`\b`, `\t`, `\n`, `\f`, `\r`, `\"`, `\'` and `\\`)은 해당 8진수(`\012`) 또는 유니코드 (`\u000a`) 이스케이프 대신에 해당 문자가 사용됩니다.

#### 2-3-3 Non-ASCII 문자

나머지 non-ASCII 문자는 실제 유니코드 문자 (예 : `∞`) 또는 동등한 유니코드 이스케이프(`\u221e`)를 사용한다.

> 팁 : 유니코드 이스케이프의 경우, 때로는 유니코드 문자가 사용되는 경우에도 설명 주석이 매우 유용할 수 있습니다.

예시:

<p align="center"><img src="image/image-20201128234507266.png" /><br>출처 : https://google.github.io/styleguide/javaguide.html</p>

> 팁 : 일부 프로그램이 비 ASCII 문자를 제대로 처리하지 못할 수 있다는 두려움 때문에 코드의 가독성을 헤치지 마십시오. 그렇게 되면 프로그램이 망가지고 고쳐야 합니다.

<br>

## 3 소스 파일 구조

소스 파일은 다음 순서로 구성됩니다.

1. 라이센스 혹은 저작권 정보 (만약 있다면)
2. 패키지 구문
3. 임포트 구문
4. 정확히 하나의 최상위 클래스 

정확히 한 줄로 각 섹션을 구분합니다.

<br>

### 3-1 라이센스 혹은 저작권 정보 (만약 있다면)

라이센스 또는 저작권 정보가 파일에 속할 경우 여기에 속해야 한다.

<br>

### 3-2 패키지 구문

패키지 서술은 줄바꿈을 하지 않습니다. 열 제한 ([섹션 4-4, 열 제한: 100]())은 여기에 적용되지 않습니다.

<br>

### 3-3 임포트 구문

#### 3-3-1 No wildcard 임포트

static 또는 기타 와일드 카드(`*`) 임포트는 사용하지 않습니다.

#### 3-3-2 No 줄바꿈 

임포트 구문은 줄 바꿈하지 않습니다. 열 제한은 임포트 문에 적용되지 않습니다.

#### 3-3-3 순서 및 간격

임포트는 다음과 같은 단계를 따릅니다:

1. 하나의 블럭안에 static 임포트 포함
2. 하나의 블럭안에 non-static 임포트 포함

static 임포트와 non-static 임포트 모두 있는 경우, 개행을 하고 두 개의 블럭으로 나눕니다. 그 이외에는 개행이 있으면 안됩니다.

각각의 블럭에는 ASCII 순서로 정렬되어 있어야 합니다. (참고: '.'가 ';'전에 오기 때문에 임포트 구문에는 ASCII 순서가 아닙니다.)

#### 3-3-4 클래스에는 static 임포트를 하지 않아야 합니다

static 임포트는 static 중첩 클래스에 사용되지 않습니다. 그것들은 일반적인 임포트를 사용합니다.

<br>

### 3-4 클래스 정의

#### 3-4-1 정확히 하나의 최상위 클래스를 선언

각 최상위 클래스는 자체 소스 파일에 있어야합니다. (소스 파일 이름의 클래스는 최상위 클래스여야한다.)

#### 3-4-2 본문 내용 순서

클래스의 멤버 및 생성자에 대한 순서는 학습 용이성에 큰 영향을 미칠 수 있습니다. 그러나, 정답은 없습니다. 다양한 클래스들은 다른 방법으로 내용의 순서를 정할 수 있습니다.

중요한 것은 각 클래스가 어떤 논리적인 순서를 사용해야 한다는 것이며, 이는 유지보수자(혹은 관리자)가 요청하면 설명할 수 있어야 합니다. 예를 들어, 새로운 메서드를 클래스 끝에 습관적으로 추가했다면, 이는 논리적 순서가 아닌 "발생 순서대로"추가한 것입니다. (이는 잘못된 예제)

##### 3-4-2-1 오버로드: 절대 분리 X

클래스가 여러 개의 생성자들 혹은 같은 이름의 함수들을 가지고 있다면 이것들은 가운데 다른 코드들 없이 차례로 나타나야 합니다. (private 멤버라 할 지라도)



## 4 포매팅

용어 노트 : block-like construct (블록과 유사한 구조)는 클래스, 메서드 또는 생성자의 본문을 나타냅니다. []()에 따라 모든 배열 초기화블럭은 block-like construct인 것처럼 처리될 수 있습니다.

<br>

### 4-1 중괄호

> 중괄호 = `{}`

#### 4-1-1 중괄호는 선택사항이라도 사용된다

중괄호는 본문이 비어 있거나 단일문이라도 사용됩니다. 

즉, if, else, for, do, while 구문에 몸체가 없거나 한 줄만 있어도 중괄호가 사용되야 합니다.

#### 4-1-2 비어 있지 않은 블록: K & R 스타일

중괄호는 비어 있지 않은 블럭(non-empty)과 block-like construct에 대해서 Kernighan과 Ritchie 스타일(Egyptian brackets)을 따릅니다.

* 여는 중괄호 앞에는 줄 바꿈이 없음.
* 여는 중괄호 뒤의 줄 바꿈.
* 닫는 중괄호 전에 줄 바꿈
* 명령문, 메서드, 생성자 또는 클래스의 본문이 끝났을 때는 닫는 중괄호 다음에 줄 바꿈. 만약 else나 콤마뒤에 나오는 부분일 경우 줄 바꿈 하지 않음.

예시:

```java
return () -> {
  while (condition()) {
    method();
  }
};

return new MyClass() {
  @Override public void method() {
    if (condition()) {
      try {
        something();
      } catch (ProblemException e) {
        recover();
      }
    } else if (otherCondition()) {
      somethingElse();
    } else {
      lastThing();
    }
  }
};
```

Enum 클래스는 예외가 있습니다. [4.8.1]()

#### 4-1-3 비어 있는 블럭: 아마 간결하게

빈 블럭이나 block-like construct 에서는 K & R 스타일 일 수 있습니다 ([4.1.2](#4-1-2-비어-있지-않은-블록-k--R-스타일) 처럼). 대안으로 중괄호 안에 문자가 없거나 줄바꿈이라면 열자마자 닫을 수 있습니다. 하지만 멀티 블럭 구문에서는 안됩니다. (직접 멀티 블럭을 가진: `if/else`, `try/catch/finally` 등)

예시:

```java
  // 허용됩니다.
  void doNothing() {}

  // 이것도 허용됩니다.
  void doNothingElse() {
  }
```

```java
  // 허용되지 않음: 멀티 블럭 구문에서는 간결한 빈 블럭을 사용할 수 없습니다.
  try {
    doSomething();
  } catch (Exception e) {}
```

<br>

### 4-2 블럭 들여쓰기: +2 스페이스

새 블럭 또는 block-like constructor가 열릴 때마다 두 칸씩 들여쓰기합니다. 블럭이 끝나면, 들여쓰기는 이전의 들여쓰기 단계로 돌아갑니다. 들여쓰기 단계는 코드와 주석에 모두 적용됩니다. ([4.1.2](#4-1-2-비어-있지-않은-블록-k--R-스타일) 예제 코드를 참고하세요.)

<br>

### 4-3 줄 당 하나의 서술

각각의 구문은 뒤에 줄바꿈이 있습니다.

<br>

### 4-4 열 제한: 100

자바 코드는 100 문자의 열 제한이 있습니다. 여기서 "문자"란 어떠한 유니코드 포인트를 말합니다. 아래 명시된 경우를 제외하고는 제한을 초과하는 모든 줄은 [섹션 4.5]()에서 설명한대로 줄 바꿈해야 합니다.

> 하나의 유니코드 포인트는 화면상 표시 넓이가 길든 짧든 하나의 문자로 계산됩니다. 예를 들어, full-width (한국어, 중국어 등등)를 사용할 경우 규칙보다 일찍 줄 바꿈하는게 좋습니다.

예외:

1. 열 제한을 따를 수 없는 행 (예 : Javadoc의 긴 URL 또는 긴 JSNI 메서드 참조)
2. package나 import 구문 ([3.2 패키지 구문](#3-2-패키지-구문), [3.3 임포트 구문](3-3-임포트-구문) 참조)
3. 쉘에 복사 붙여넣기 되는 명령 줄에 대한 주석

<br>

### 4-5 줄 바꿈

용어 노트 : 코드가 하나의 줄에서 여러 줄로 바뀐다면 그것을 줄 바꿈이라고 부릅니다.

모든 상황에서 줄 바꿈하는 방법을 정확히 보여주는 포괄적이고 결정적인 공식은 없습니다. 동일한 코드를 줄 바꿈하는 여러 가지 유효한 방법이 있습니다. (절대적인 법칙은 없고 상황에 맞게 적절하게 사용하면 됩니다.)

> 노트 : 줄 바꿈의 일반적인 이유는 열 제한을 넘지 않기 위함이지만, 열 제한에 걸리지 않는 코드도 작성자의 재량에 따라 줄 바꿈 할 수 있습니다.

> 팁 : 메서드 또는 지역 변수를 추출하는 것이 줄 바꿈을 대신할 수 있는 방법이 될 수 있습니다.

#### 4-5-1 언제 다음 문장으로 내릴까

줄 바꿈의 주요 원칙은 더 높은 구문 수준에서 바꾸는 것입니다. 또한:

1. non-assignment 연산자에서 줄 바꿈이 일어난 경우 줄 바꿈은 기호 이전에 위치합니다.
   * 이것은 "operator-like" 기호에도 적용됩니다.
     * the dot separator (`.`)
     * 2개 콜론 (`::`)
     * 타입 바운딩의 앰퍼센드 기호 (`<T extends Foo & Bar>`)
     * catch 블럭의 파이프 (` catch (FooException | BarException e)`)

2. assignment 연산자에서 줄 바꿈이 일어나면 기호 다음에 바뀌지만 어디서 바뀌어도 상관없습니다.
   * 이것은 "assignment-operator-like"콜론에도 적용됩니다. (`foreach`)
3. 메서드나 생성자의 이름에 여는 괄호가 있을 때 
4. 콤마 앞에 오는 토큰에 연결되어 있을 때
5. 줄은 람다식의 인접한 화살표에서는 바뀌지 않는다. 하지만 람다의 몸체가 한 줄로 되어 있다면 바꿔도 됩니다. 예를 들면:

```java
MyLambda<String, Long, Object> lambda = 
    (String label, Long value, Object obj) -> {
        ...
    };

Predicate<String> predicate = str ->
    longExpressionInvolving(str);
```

> 참고 : 줄 바꿈의 목적은 깨끗한 코드를 만들기 위함이지, 줄 수를 줄이는데 있지 않습니다.



예시:

```java
String someThing = new StringBuffer()
          .append("hello")
          .append("world");

String someThing = "hello"
                 + "world";
```

#### 4-5-2 들여쓰기 지속은 최소 +4 공백

줄 바꿈할 때, 각 줄은 원래 줄보다 +4 스페이스만큼 들여쓰기를 해야합니다.

여러 줄 바꿈 줄이 있을 때, 들여쓰기는 +4 이상으로 변동 가능합니다. 일반적으로, 두 개의 연속된 줄은 같은 들여쓰기 레벨을 갖고 구문적으로 병렬인 요소일때만 적용됩니다.

[4.6.3]()에 수평 일직선은 가변적인 수의 공백을 사용하여 특정 토큰을 이전 행과 정렬하는 불편함을 언급합니다.

<br>

### 4-6 공백

#### 4-6-1 수직 공백

> 수직 공백이란 하나의 줄을 공백으로 두는 것을 의미한다.

하나의 공백 줄은 항상 아래와 같을 때 사용합니다:

1. 연속 멤버 또는 클래스의 초기화: 필드, 생성자, 메서드, 중첩 클래스, 정적 초기화 그리고 인스턴스 초기화
   * 예외: 연속된 두 필드 사이의 공백은 선택입니다. 이러한 공백은 필요에 따라 필드의 논리적 그룹을 만드는데 사용됩니다.
   * 예외: enum 상수의 공백 줄은 [4.8.1]() 절에서 다룹니다.
2. 이 문서의 다른 섹션에서도 필요합니다. ([섹션 3 소스 파일 구조](), 그리고 [3.3 임포트 구문]())

하나의 공백 줄은 가독성을 향상시킬 수 있는 어디에서나 등장할 수 있습니다. 예를 들어, 코드를 논리적 부분으로 나눌 때 사용됩니다. 첫번째 멤버 나 초기화 전의 공백 줄 혹은 클래스의 마지막 멤버나 초기화 뒤에 오는 공백 줄은 권장되거나 권장되지 않습니다.

여러 개의 연속된 공백은 허용되지만 요구되지는 않습니다.

#### 4-6-2 수평 공백

리터럴, 주석 및 Javadoc을 제외하고 언어 또는 기타 스타일 규칙이 필요한 곳을 넘어서는 경우 단일 ASCII 공간은 다음 위치에만 나타납니다

1. 예약어를 분리하는 경우, `if`, `for`, `catch` 같은 예약어 이후 나오는 여는 괄호(`(`)에서 사용
2. 예약어를 분리하는 경우, `else`, `catch` 같은 예약어 이후 나오는 닫는 중괄호(`}`)에서 사용
3. 

































## 참고

* [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)
* https://brunch.co.kr/@daniellim/22