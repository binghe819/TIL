> 본 자료는 [Effective Java 3/E]()를 바탕으로 작성되었습니다.

# 아이템 12. toString을 항상 재정의하라

- [기본 toString](#기본-tostring)
- [toString의 규약](#tostring의-규약)
  * [일반 규약](#일반-규약)
  * [객체가 가진 주요 정보 모두를 반환하는게 좋다](#객체가-가진-주요-정보-모두를-반환하는게-좋다)
  * [반환값의 포맷을 문서화하는게 좋다](#반환값의-포맷을-문서화하는게-좋다)
  * [toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하라](#tostring이-반환한-값에-포함된-정보를-얻어올-수-있는-api를-제공하라)
- [핵심 정리](#핵심-정리)

<br>

## 기본 toString

```java
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
}
```

위와 같이 기본 `toString`은 단순히 클래스 이름에 16진수로 표시한 해시코드를 반환한다.

<br>

## toString의 규약

### 일반 규약

`toString`의 규약은 다음과 같다.

* **간결하면서 사람이 읽기 쉬운 형태의 유익한 정보**를 반환해야 한다.
* **모든 하위 클래스에서 이 메서드를 재정의하라**

<br>

### 객체가 가진 주요 정보 모두를 반환하는게 좋다

실전에서 `toString`은 그 객체가 가진 주요 정보 모두를 반환하는게 좋다.

즉, **이상적으로는 객체 스스로를 완벽히 설명하는 문자열이어야 한다.**

```java
PhoneNumber@a8e8 // 기본 toString
010-1111-1111 // toString 재정의한 PhoneNumber
```

만약 정확한 설명이 안된다면 요약 정보를 담아야 한다. 예를 들어 `전화번호부(총 123414개)`

<br>

### 반환값의 포맷을 문서화하는게 좋다

`toString`을 구현할 때면 반환값의 포맷을 문서화하는게 좋다. (선택이긴 하다.)

```java
/**
 * 이 전화번호의 문자열 표현을 반환한다.
 * 이 문자열은 "XXX-YYY-ZZZZ"형태의 12글자로 구성된다.
 * XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.
 * 각각의 대문자는 10진수 숫자 하나를 나타낸다.
 */
@Override
public String toString() {
    return String.format("%03d-%03d-%04d",
                        areaCode, prefix, lineNum);
}
```

위와 같이 **반환값의 대한 포맷을 문서화하면 객체는 표준적이고, 명확하고, 사람이 읽을 수 있게 된다.** 그리고 값 그대로 입출력에 사용하거나 CSV 파일처럼 사람이 읽을 수 있는 데이터 객체로 저장할 수 있다.

하지만, **포맷을 한번 명시하면 반-표준이 되므로, 영원히 포맷을 바꿀 수 없게 될 수도 있다.** (바꾸게 되면 다른 코드가 말썽)

그러므로 **포맷을 문서화 하려고 한다면 의도를 명확히 밝혀야 한다.**

<br>

### toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하라

예컨대 `PhoneNumber` 클래스는 지역 코드, 프리픽스, 가입 번호용 접근자를 제공해야 한다. **(getter)**

그렇지 않으면 이 정보가 필요한 프로그래머는 `toString`의 반환값을 파싱해서 사용해야 한다. **(쓸데 없는 연산 추가)**

<br>

## 핵심 정리

* 모든 구체 클래스에서 `Object`의 `toString`을 재정의하자.
  * 상위 클래스에서 이미 알맞게 재정의한 경우는 예외다.
* `toString`을 재정의한 클래스는 사용하기도 즐겁고 그 클래스를 사용한 시스템을 디버깅하기 쉽게 해준다.
* `toString`은 해당 객체에 관한 명확하고 유용한 정보를 읽기 좋은 형태로 반환해야 한다.