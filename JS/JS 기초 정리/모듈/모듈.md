# 모듈

<br>

- [모듈](#모듈)
  - [모듈과 상태 관리를 알아야 하는 이유](#모듈과-상태-관리를-알아야-하는-이유)
  - [1 모듈의 의미](#1-모듈의-의미)
  - [2 모듈의 핵심 - 캡슐화](#2-모듈의-핵심---캡슐화)
  - [3 export와 import](#3-export와-import)
    - [3-1 export](#3-1-export)
    - [3-2 import](#3-2-import)
- [참고](#참고)

<br>

## 모듈과 상태 관리를 알아야 하는 이유
* JS 코드의 재사용성을 높이고 싶다면
* JS로 Module로 구분했을 때 데이터의 상태관리를 일관되게 하고 싶다면

<br>

## 1 모듈의 의미
* ES6 이전 (더 자세한 내용은 [여기](https://d2.naver.com/helloworld/12864))
  * ES6 이전까지 JS 파일에 정의된 애플리케이션의 모든 부분은 하나의 전역 스코프를 공유했다.
  * 그리고 애플리케이션이 점점 복잡해질수록, JS 파일이 많아지고, 이름 충돌이나 보안상 우려되는 문제들을 일으켰다.
  * 실제로, `script` 태그로 여러 js파일을 로드해도 하나의 JS 파일 내에 있는 것처럼 동작한다.
  * ES6 전에는 모듈과 비슷한 방법으로 `즉시 실행 함수`를 이용했다고 한다. (클로저를 활용)
* **모듈의 의미**
  * **모듈이란 애플리케이션을 구성하는 개별적 요소로서 재사용 가능한 코드 묶음 단위를 의미한다.**
  * 일반적으로 **모듈은 기능을 기준으로 파일 단위**로 분리한다.
  * 모듈이 성립하려면 모듈은 자신만의 파일 스코프(모듈 스코프)를 가질 수 있어야 한다.

<p align="center"><img src="./image/module.png" width="400"><br> 출처 : https://poiemaweb.com/es6-module </p>

<br>

## 2 모듈의 핵심 - 캡슐화
* 모듈의 핵심은 캡슐화다.
  * 모듈 안의 모든 기능은 모듈 안에서 동작하며, 모듈 밖에서는 접근이 허용된 속성이나 메서드만 사용할 수 있도록 허용된다.

<br>

## 3 export와 import

<br>

### 3-1 export
모듈은 독자적인 모듈 스코프를 갖는다. 

**모듈 내부에서 선언한 식별자를 외부에 공개하여 다른 모듈들이 재사용할 수 있게 하려면 `export`키워드를 사용한다.**
```js
// 변수의 공개
export const pi = Math.PI;

// 함수의 공개
export function square(x) { 
    return x * x;
}

// 클래스의 공개
export class Person {
    constructor(name) {
        this.name = name;
    }
}
```
```js
// lib.mjs
const pi = Math.PI;

function square(x) { 
    return x * x;
}

class Person {
    constructor(name) {
        this.name = name;
    }
}

// 변수, 함수 클래스를 하나의 객체로 구성하여 공개
export { pi, square, Person }
```
```js
// 모듈에서 하나의 값만 export한다면 default 키워드를 사용할 수 있다.
export default x => x * x;
```
* `default` 키워드를 사용하는 경우 `var`, `let`, `const` 키워드를 사용할 수 없다.

<br>

### 3-2 import
다른 모듈에서 공개(`export`)한 식별자를 자신의 모듈 스코프 내부로 로드하려면 `import` 키워드를 사용한다.

```js
// 파일 확장자를 생략할 수 없다.
import { pi, square, Person} from './lib.mjs';

// lib.mjs 모듈이 export한 모든 식별자를 lib 객체의 프로퍼티로 모아 import 한다.
import * as lib from './lib.mjs';

// 식별자 이름을 변경할 수도 있다.
import { pi as PI, square as sq, Person as P} from './lib.mjs';
```

<br>

# 참고
* 우테코 모듈 & 상태 관리 강의
* [모던 자바스크립트 Deep Dive]()
